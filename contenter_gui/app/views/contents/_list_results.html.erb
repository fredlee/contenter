<%
  count ||= result.size
  columns = [ 
             :content_type, 
             :content_key,
             :language,
             :country,
             :brand,
             :application,
             :mime_type,
            ]
-%>
<hr />
<div class="streamlined_header"><h3><%=h title %>: <%=h count %></h3></div>
<% if result.empty? %>
<p><i>None</i></p>
<% else %>
<%= will_paginate result %>
<table class="streamlined">
<thead>
<tr>
  <% columns.each do | c | %>
  <th><%= h c.to_s.titleize %></th>
  <% end %>
  <th>Version</th>
  <th>Data</th>
</tr>
</thead>
<tbody>
<% ri = -1; result.each do | x | %>
<tr class="<%= (ri += 1) % 2 == 0 ? :even : :odd %>">
  <% ctlr = 
      case x
      when Content
        :contents
      when Content::Version
        :content_versions
      else
        nil
      end
     %>
      <% columns.each do | c | %>
  <% v = x.send(c) %>
  <td><%= link_to h(v.code),
	  :controller => c.to_s.pluralize,
          :action => :show, 
          :id => v
       %></td>
  <% end %>
  <td><%= link_to h(x.version_as_html),
	  :controller => ctlr,
          :action => :show, 
          :id => x
	  %></td>
  <td><%= link_to h(x.data_short),
	  :controller => ctlr,
          :action => :show, 
          :id => x
	  %></td>
</tr>
<% end %>
</tbody>
</table>
<% end %>

